<!DOCTYPE HTML>

<html>

<head>
<!-- Bootstrap Core CSS -->
<link href="Resources/css/bootstrap1.min.css" rel="stylesheet">
<!-- Custom CSS -->
<link href="Resources/css/simple-sidebar.css" rel="stylesheet">
<link href="Resources/css/ProjectStyleSheet.css" rel="stylesheet">
</head>

<body class="index">

	<div class="page-header">
		<br>
		<h2>
			Group one - One Directory <small>Project</small>
		</h2>
		<h2>Login Page</h2>
	</div>

	<!-- creating Sign in form, source (incl css): http://getbootstrap.com/examples/signin/ -->
	<!--<div class="container" "col-md-4 col-md-offset-4">-->
	<div class="col-md-4 col-md-offset-2">

		<h2 class="form-signin-heading">Please sign in</h2>
		<br> <input id="id" name="id" type="number" placeholder="UserID"
			class="form-control" required autofocus> <br> <input
			name="pass" id="pass" type="password" placeholder="Password"
			class="form-control" required> <br>

		<button class="btn btn-lg btn-primary btn-block" name="submit"
			id="submit" value="Login">Log In</button>
		<br>





		<div data-role=footer>
			<p>Authors: Calvin McGowan, Darren Kane, Peter Farrell, John
				Fleming, Brian Cowzer</p>
		</div>

	</div>
	</footer>

	<script src="Resources/js/jquery-1.6.1.min.js"></script>
	<script src="https://code.jquery.com/jquery.js"></script>
	<script src="Resources/js/bootstrap.min.js"></script>
	<!-- jQuery -->

	<script>

	$(function(){
		var $users = $('#user');

		$( "#submit" ).click(function(e) {
		
		var pass= $("#pass").val();

		$.ajax({
			type: 'GET',
			url:'http://localhost:8080/project/rest/user/'+$("#id").val(),
			dataType: 'json',
			contentType: "application/json",
			success: function(retData){

				if(retData!=null){
					var realPass= retData.userPassword;
					var type = retData.userType;
					if(realPass===pass)	{
						goToUserPage(type);
					}else
						alert('Incorrect Password');
					
					}
			
				else{
					alert('User ID does not exist');
				}
					
				}
			});
		});
	});

	function goToUserPage(type){
		if(type==="Support Engineer"){
			location="supportPage3.html";
		}
		else if(type==="Network Management Engineer"){
			location="NMEPage.html";
		}
		else if(type==="Customer Service Rep"){
			location="CSRPage.html";
		}
		else 
			location="adminPage.html"	
		}

	</script>
</body>


</html>

