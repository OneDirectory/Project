    <!DOCTYPE html>
    <html lang="en">

    <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">


    <!-- Bootstrap Core CSS -->
        <link href="Resources/css/bootstrap1.min.css" rel="stylesheet">
<!-- Custom CSS -->
		<link href="Resources/css/simple-sidebar.css" rel="stylesheet">
		<link href="Resources/css/ProjectStyleSheet.css" rel="stylesheet">
    </head>

    <body>
    <body class="adminPage">
        <div class="page-header">
            <br>
            <h2>
                Group one - One Directory <small>Project</small>
            </h2>
            <h2>Support Engineer Page</h2>
        </div>

        <div id="wrapper">
            <!-- Sidebar -->
            <div id="sidebar-wrapper">
                <ul class="sidebar-nav">
                    <li class="sidebar-brand"><a href="#"> Menu </a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Search by IMSI</a></li>
                    <li><a href="index.html">Log out</a></li>
                </ul>
                <br>
            </div>
            <!-- /#sidebar-wrapper -->

            <!-- Page Content -->
            <div id="page-content-wrapper">
                <div class="container-fluid">
                    <div class="row">
                        <div class="col-lg-12" id='container'>
                            <h1>Search failed data by model</h1>

    <!-- 						<form class="form-horizontal" role="form" method="POST"> -->
                            <div class="form-group" id="myDiv">
                                <div class="col-sm-5">
                                    <label class="control-label col-sm-2" for="ID">Model:</label> 
                                    <select class="form-control" id="ID" placeholder = "Select a model.." autofocus>

                                    </select>
                                </div>
                            </div>

                            <div class="form-group">
                                    <label class="control-label col-sm-2" for="pwd">Date - from:</label>
                                <div class="col-sm-5">
                                    <input type="datetime-local" name="from" id="from">
                                </div>
                            </div>
                            
                            <div class="form-group">
                                    <label class="control-label col-sm-2" for="pwd">Date - to:</label>
                                <div class="col-sm-5">
                                            <!--<input type="text" class="form-control" id="firstname" placeholder="to:">-->
                                    <input type="datetime-local" name="to" id="to">
                                </div>
                            </div>


                            <div class="form-group">
                                <div class="col-sm-offset-4 col-sm-10">
                                    <br>
                                    <button id='submit' name='submit' class="btn btn-primary">Search</button>
                                </div>
                            </div>
                        </div>
    <!-- 						</form> -->
                        </div>
                    </div>
                </div>
            </div>
            <!-- /#page-content-wrapper -->

        </div>
        <!-- /#wrapper -->


        <table class="table" id='table' name='table'>

    <!-- 		<tr> -->
    <!-- 				<th>EventID</th> -->
    <!-- 				<th>CauseCode</th> -->
    <!-- 				<th>IMSI</th> -->
    <!-- 		</tr> -->

            </table>


                <script src="Resources/js/jquery-1.6.1.min.js"></script>
                <script src="Resources/js/bootstrap.min.js"></script>

                <script>

     $("#menu-toggle").click(function(e) {
         e.preventDefault();
         $("#wrapper").toggleClass("toggled");
      });

    </script>

    <script>

    var $table = $('#table');

        $(function(){

        var $select = $('#ID');


        $.ajax({
            type: 'GET',
            url:'http://localhost:8080/Project-0.0.1-SNAPSHOT/rest/userequipment/getAllModelsFromUserEquipment',
            success: function(mydata){
                var data=mydata;
                var length=data.length;

                for(var i=0; i<length; i++){
                    var x=data[i];
                    var option=document.createElement('option');	
                    option.text=x;	
                    $select.append(option);			
                    }					
                }
            });
        });

    </script>



    <script>

    $(function(){


        $( "#submit" ).click(function(e) {

        removeData();	
	    var fromDate=$('#from').val();
	    var toDate=$('#to').val();
	    var myurl;
	    var isValid=false;

        var x=document.getElementById("ID");
        var selected=x.options[x.selectedIndex].text;
        
        if(validateEntry(fromDate, toDate)){	
		myurl='http://localhost:8080/Project-0.0.1-SNAPSHOT/rest/failedcalldataByModel/'+selected+fromDate+'Â£'+toDate;
		isValid=true;
		}

	else{
		myurl= 'http://localhost:8080/Project-0.0.1-SNAPSHOT/NMEPage.html';
		isValid=false;
		}

        createTable();
        createButton();

        $.ajax({

            type:'GET',
            url: myurl,
            dataType: 'json',
            contentType: "application/json",

            success:function(data){

              if(isValid && data.length>0){
 	 			createTable();
 	 			createButton();
 	 			$.each(data, function(key, value){
 	 				$table.append('<tr><td>'+value[0]+'</td><td>'+value[1]+'</td><td>'+value[2]+'</td></tr>');
 	 	 			});
	 	 			isValid=false;
 	 	 		}
 	 		else if(isValid && data.length===0){
				alert('No available data for selected dates');
 	 	 		}
            }
          });
       });
    });
        
        function validateEntry(from, to){
		if(from===''){
			alert('Invalid FROM DateTime');
			return false;
		}
		else if(to===''){
			alert('Invalid TO DateTime');
			return false;
		}
		else if(isFromGtrTo(from, to)){
			alert('FROM date id greater than TO date');
			return false;
		}
		
		else
			return true;
	}

	function isFromGtrTo(from, to){
			
			var date1 = new Date(from);
			var date2 = new Date(to);
			
			if(date2.getTime()<=date1.getTime())
				return true;
			else
				return false;
	}



    function createTable(){
    	var x=document.getElementById("ID");
        var selected=x.options[x.selectedIndex].text;

        var row=document.createElement('tr');
        row.setAttribute('id', 'head');
        var colOne=document.createElement('th');
        var colTwo=document.createElement('th');
        var colThree=document.createElement('th');

        colOne.innerHTML='number of failure for'+' '+selected;
        colTwo.innerHTML='Event ID';
        colThree.innerHTML='IMSI';

        row.appendChild(colOne);
        row.appendChild(colTwo);
        row.appendChild(colThree);

        $table.append(row);

    }

    function createButton(){
        var button=document.createElement(button);
        button.setAttribute('id', 'tableButton');
        button.setAttribute('class','buttonMy');
        button.innerHTML='Search Again';
        button.addEventListener('click', removeData);
        $table.append(button);

    }

    function removeData(){
        var removeHead=document.getElementById('head');
        var removeButton=document.getElementById('tableButton');
        $table.empty();
        //$table.remove(removeHead);
        //$table.remove(removeButton);
    }
    </script>


    </body>

    </html>
